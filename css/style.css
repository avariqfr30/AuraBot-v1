/* This ensures that newlines in the AI's text are rendered correctly. */
.chat-bubble p {
    white-space: pre-wrap;
}

/* Styling for lists that the Markdown parser might create */
.chat-bubble ul, .chat-bubble ol {
    list-style-position: inside;
    padding-left: 1rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
}
.chat-bubble ul {
    list-style-type: disc;
}
.chat-bubble ol {
    list-style-type: decimal;
}

/* Styling for code blocks */
.chat-bubble pre {
    background-color: #1f2937;
    color: #f9fafb;
    padding: 1rem;
    border-radius: 0.5rem;
    margin-top: 0.75rem;
    margin-bottom: 0.75rem;
    overflow-x: auto;
    font-family: 'Courier New', Courier, monospace;
}

.chat-bubble code {
    font-family: 'Courier New', Courier, monospace;
}

/* ================================================================= */
/* --- Tuxedo Cat Animation --- */
/* ================================================================= */
#animated-cat-container {
    animation: bobbing-cat 3s ease-in-out infinite;
}

@keyframes bobbing-cat {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-4px);
    }
}

/* ================================================================= */
/* --- Final Branded Liquid Glass UI --- */
/* ================================================================= */

/* --- 1. Pitch Black Background & Font --- */
body, #chatSidebar {
    background: #000000 !important;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
}
#chatSidebar {
    backdrop-filter: none !important; -webkit-backdrop-filter: none !important;
    border: none !important; box-shadow: none !important;
}


/* --- 2. Layout Fixes --- */
.flex-1.flex.flex-col { position: relative; } 
#chatMessages { 
    padding-top: 5rem; 
    padding-bottom: 7rem; 
    scroll-behavior: smooth; 
}
.flex-1 > header, .flex-1 > footer {
    background-color: transparent !important; backdrop-filter: none !important; -webkit-backdrop-filter: none !important;
    border: none !important; box-shadow: none !important;
    position: absolute; left: 0; width: 100%;
}
.flex-1 > header { top: 0; z-index: 20; }
.flex-1 > footer { bottom: 0; z-index: 10; }


/* --- 3. Unified Liquid Glass Style --- */
/* Base properties for ALL glass elements */
#settingsModal .relative, #toolsModal .relative, /* Panels */
#userInput, .flex-1 > header h1, /* Header/Footer Elements */
button, /* ALL buttons */
#chatList > div.bg-gray-800, /* Selected Chat Item */
.affirmation-card, .checklist-scroll-container, /* Tool Panels */
#systemPromptTextarea, #voiceSelectDropdown, #modelSelectDropdown /* Form Fields */ {
    position: relative;
    z-index: 1;
    backdrop-filter: blur(5px) brightness(1.2) !important;
    -webkit-backdrop-filter: blur(5px) brightness(1.2) !important;
    border: none !important;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3) !important;
    transition: all 0.2s ease-in-out, opacity 0.3s ease, transform 0.3s ease !important;
    color: #f9fafb !important;
    text-shadow: 0 0 5px rgba(0,0,0,0.5);
}
/* Reflection & Edge Layer */
#settingsModal .relative::before, #toolsModal .relative::before,
#userInput::before, .flex-1 > header h1::before,
button::before,
#chatList > div.bg-gray-800::before,
.affirmation-card::before, .checklist-scroll-container::before,
#systemPromptTextarea::before, #voiceSelectDropdown::before, #modelSelectDropdown::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    border-radius: inherit;
    z-index: -1;
    background: linear-gradient(to bottom, rgba(255,255,255,0.05) 0%, transparent 100%);
    box-shadow: inset 0 0 0 0.5px rgba(255, 255, 255, 0.1);
}


/* Hover effect */
#settingsModal .relative:hover, #toolsModal .relative:hover,
#userInput:hover, .flex-1 > header h1:hover, button:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 12px 40px rgba(0,0,0,0.4) !important;
}

/* Neutral Dark Glass Tint */
#settingsModal .relative, #toolsModal .relative,
#userInput, .flex-1 > header h1,
#micButton, #settingsButton, #toolsButton, #cancelSettingsButton, #resetSettingsButton, #closeToolsButton, .tool-button, .mood-button,
#chatList > div.bg-gray-800,
.affirmation-card, .checklist-scroll-container,
#systemPromptTextarea, #voiceSelectDropdown, #modelSelectDropdown {
    background-color: rgba(30, 30, 40, 0.3) !important;
}
#settingsModal .relative:hover, #toolsModal .relative:hover,
#userInput:hover, .flex-1 > header h1:hover, #micButton:hover, #settingsButton:hover, #toolsButton:hover, #cancelSettingsButton:hover, #resetSettingsButton:hover, #closeToolsButton:hover, .tool-button:hover, .mood-button:hover {
    background-color: rgba(30, 30, 40, 0.4) !important;
}

/* Bright Pink Liquid Glass Tint */
#newChatButton, #sendButton, #saveSettingsButton {
    background-color: rgba(219, 39, 119, 0.25) !important;
}
#newChatButton:hover, #sendButton:hover, #saveSettingsButton:hover {
    background-color: rgba(219, 39, 119, 0.35) !important;
    box-shadow: 0 12px 40px rgba(219, 39, 119, 0.4) !important;
}

/* --- 4. Element-Specific Adjustments & Overrides --- */
.flex-1 > header h1 { padding: 0.5rem 1.25rem; }
.flex-1 > header h1.is-scrolled {
    opacity: 0;
    transform: translateY(-5px) !important;
    pointer-events: none;
}
#userInput::placeholder { 
    color: rgba(255, 255, 255, 0.7); 
    text-shadow: 0 0 5px rgba(0,0,0,0.8);
} 
#userInput:focus {
    box-shadow: 0 12px 40px rgba(0,0,0,0.4), 0 0 0 2px rgba(255, 255, 255, 0.2) !important;
}

/* Border Radii */
#userInput, #micButton, #settingsButton, #toolsButton, #sendButton, #cancelSettingsButton, #resetSettingsButton, #closeToolsButton, .tool-button, .mood-button, #newChatButton { border-radius: 9999px !important; }
.flex-1 > header h1, #saveSettingsButton, #systemPromptTextarea, #voiceSelectDropdown, #modelSelectDropdown, .affirmation-card, .checklist-scroll-container { border-radius: 0.75rem !important; }
#settingsModal .relative, #toolsModal .relative, #chatList > div.bg-gray-800 { border-radius: 1.5rem; }
#chatList > div.bg-gray-800 { margin: 0.25rem 0; } 

/* Icon Readability */
#sendButton svg, #micButton svg, #settingsButton svg, #toolsButton svg { 
    filter: drop-shadow(0 0 3px rgba(0,0,0,0.8));
}
#sendButton svg { fill: #FFF; }
#micButton svg, #settingsButton svg, #toolsButton svg { stroke: #f9fafb; }


/* --- 5. Opaque Chat Bubbles --- */
.chat-bubble.ai, .chat-bubble.user {
    backdrop-filter: none; -webkit-backdrop-filter: none;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    color: #FFF; 
}
.chat-bubble.ai { /* AURA'S BUBBLE */
    background-color: #1f2937; /* Dark Gray */
    border-left: 3px solid #db2777;
    border-radius: 1.5rem 1.5rem 1.5rem 0.5rem;
}
.chat-bubble.user { /* USER'S BUBBLE */
    background-color: #3b82f6; /* Blue */
    border-radius: 1.5rem 1.5rem 0.5rem 1.5rem;
    border: none;
}

/* --- 6. Chat List Adjustments --- */
#chatList > div {
    background-color: transparent !important;
}
#chatList > div:hover {
    background-color: rgba(255, 255, 255, 0.1) !important;
    border-radius: 0.75rem;
}